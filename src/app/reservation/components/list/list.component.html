<mat-card>
  <table
    mat-table
    [dataSource]="dataSource"
    matSort
    class="mat-table"
    [class.hidden]="false"
  >
    <!-- Date Column -->
    <!-- <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Date</th>
            <td mat-cell *matCellDef="let reservation">{{ reservation.date }}</td>
          </ng-container> -->

    <!-- startHour Column -->
    <ng-container matColumnDef="startHour">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header
        class="centered-header"
      >
        From
      </th>
      <td mat-cell *matCellDef="let reservation">
        {{ reservation.startHour }}
      </td>
    </ng-container>

    <!-- startHour Column -->
    <ng-container matColumnDef="endHour">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>To</th>
      <td mat-cell *matCellDef="let reservation">
        {{ reservation.endHour }}
      </td>
    </ng-container>

    <!-- Place Column -->
    <ng-container matColumnDef="place">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Place</th>
      <td
        mat-cell
        *matCellDef="let reservation"
        #reservation_place
        id="mat-cell-place"
      >
        {{ reservation.place }}
      </td>
    </ng-container>

    <!-- User Column -->
    <!-- <ng-container matColumnDef="user" >
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Reservator</th>
            <td mat-cell *matCellDef="let reservation">
              {{ reservation.user.name }}
            </td>
          </ng-container> -->

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="centered-header">Actions</th>
      <td mat-cell *matCellDef="let reservation">
        <button
          mat-icon-button
          color="primary"
          (click)="viewDetails(reservation)"
          *ngIf="!currentUser"
        >
          <mat-icon>visibility</mat-icon>
        </button>

        <!-- menu -->
        <button
          mat-icon-button
          [matMenuTriggerFor]="menu"
          aria-label="Example icon-button with a menu"
          *ngIf="currentUser"
          class="centered-header"
        >
          <mat-icon>more_vert</mat-icon>
        </button>

        <mat-menu #menu="matMenu">
          <!-- visibility -->
          <button mat-menu-item (click)="viewDetails(reservation)">
            <mat-icon>visibility</mat-icon>
            <span>Details</span>
          </button>

          <!-- delete -->
          <button
            mat-menu-item
            [disabled]="
              !(
                currentUser?.id === reservation.user.id ||
                currentUser?.role === 'admin' ||
                currentUser?.role === 'moderator'
              )
            "
            (click)="delete(reservation)"
          >
            <mat-icon>delete</mat-icon>
            <span>Delete</span>
          </button>

          <!-- edit -->
          <button mat-menu-item disabled>
            <mat-icon>edit</mat-icon>
            <span>Edit</span>
          </button>

          <!-- Pending Reject Aprove -->
          <ng-container
            *ngIf="
              currentUser?.role === 'admin' || currentUser?.role === 'moderator'
            "
          >
            <!-- Approve -->
            <button mat-menu-item (click)="approve(reservation)">
              <mat-icon>check_circle</mat-icon>
              <span>Approve</span>
            </button>

            <!-- Reject -->
            <!-- <button mat-menu-item (click)="reject(reservation)">
                  <mat-icon>cancel</mat-icon>
                  <span>Reject</span>
                </button> -->

            <!-- Pending -->
            <button mat-menu-item (click)="pending(reservation)">
              <mat-icon>hourglass_bottom</mat-icon>
              <span>Pending</span>
            </button>
          </ng-container>
        </mat-menu>
      </td>
      <!-- menu -->
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      [ngClass]="getRowClass(row)"
    ></tr>
  </table>
  <ul class="list">
    <li><span class="circle pending"></span> - pending</li>
    <li><span class="circle aproved"></span> - aproved</li>
    <!-- <li><span class="circle rejected"></span> - rejected</li> -->
  </ul>
</mat-card>
